@inject IJSRuntime JS
<!---->
@code {
    [Parameter]
    public ChemSharp.Molecules.Bond? Data { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (Data == null) return;
        var start = Data.Atom1.Location;
        var end = Data.Atom2.Location;
        var loc = Vector3.Lerp(start, end, .5f);
        var up = new Vector3(0, 1, 0);
        var line = end - start;
        var axis = Vector3.Cross(up, line);
        var rad = MathF.Acos(Vector3.Dot(up, Vector3.Normalize(line)));
        var matrix = Quaternion.CreateFromAxisAngle(Vector3.Normalize(axis), rad);
        await JS.InvokeVoidAsync("JSLib.addBond", loc.X, loc.Y, loc.Z, matrix.X, matrix.Y, matrix.Z, matrix.W, line.Length());
    }
}
